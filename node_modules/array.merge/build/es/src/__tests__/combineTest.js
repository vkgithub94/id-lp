import { expect } from 'chai';
import { combine, combineSub } from '../index.js';
describe('Test array combine', function () {
  it('test combine', function () {
    var arr = {
      foo: ['a', 'b', 'c'],
      bar: ['d', 'e', 'f']
    };
    var acture = combine(arr);
    var expected = [{
      foo: 'a',
      bar: 'd'
    }, {
      foo: 'b',
      bar: 'e'
    }, {
      foo: 'c',
      bar: 'f'
    }];
    expect(acture).to.deep.equal(expected);
  });
  it('test combine with object key', function () {
    var arr = {
      foo: ['a', 'b', 'c'],
      bar: ['d', 'e', 'f']
    };
    var acture = combine(arr, 'foo');
    var expected = {
      a: {
        foo: 'a',
        bar: 'd'
      },
      b: {
        foo: 'b',
        bar: 'e'
      },
      c: {
        foo: 'c',
        bar: 'f'
      }
    };
    expect(acture).to.deep.equal(expected);
  });
  it('not array', function () {
    var acture = combine(null);
    expect(acture).to.be.undefined;
  });
});
describe('Test combine sub', function () {
  var subArr = {
    someSubKey: {
      foo: ['a'],
      bar: ['d']
    }
  };
  it('test combine sub', function () {
    var arr = [{
      somekey: 'someSubKey'
    }];
    var acture = combineSub(arr, subArr, 'somekey');
    var expected = [{
      somekey: [{
        foo: 'a',
        bar: 'd'
      }]
    }];
    expect(acture).to.deep.equal(expected);
  });
  it('test sub key not exists', function () {
    var arr = [{
      somekey: 'xxx'
    }];
    var acture = combineSub(arr, subArr, 'somekey');
    var expected = [{
      somekey: null
    }];
    expect(acture).to.deep.equal(expected);
  });
});