import _typeof from "reshow-runtime/es/helpers/typeof";
import { FUNCTION, UNDEFINED } from 'reshow-constant';
var keys = Object.keys;
var isArray = Array.isArray;

var removeEmpty = function removeEmpty(arr, undefinedOnly, excludeKey) {
  if (!arr) {
    return arr;
  }

  if (undefinedOnly && FUNCTION !== _typeof(undefinedOnly)) {
    undefinedOnly = function undefinedOnly(value) {
      return UNDEFINED !== _typeof(value);
    };
  }

  var result = {};
  keys(arr).forEach(function (key) {
    var value = arr[key];

    if (excludeKey && excludeKey.length && -1 !== excludeKey.indexOf(key)) {
      return;
    }

    if (value || undefinedOnly && undefinedOnly(value)) {
      result[key] = value;
    }
  });

  if (isArray(arr)) {
    return keys(result).map(function (key) {
      return result[key];
    });
  } else {
    return result;
  }
};

export default removeEmpty;